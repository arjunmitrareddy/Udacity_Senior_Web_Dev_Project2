"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(s,t,r){return t&&e(s.prototype,t),r&&e(s,r),s}}(),_express=require("express"),_express2=_interopRequireDefault(_express),_zlib=require("zlib"),_zlib2=_interopRequireDefault(_zlib),_compression=require("compression"),_compression2=_interopRequireDefault(_compression),_http=require("http"),_http2=_interopRequireDefault(_http),_net=require("net"),_net2=_interopRequireDefault(_net),_ws=require("ws"),_templatesIndex=require("./templates/index"),_templatesIndex2=_interopRequireDefault(_templatesIndex),_templatesInfoPanel=require("./templates/infoPanel"),_templatesInfoPanel2=_interopRequireDefault(_templatesInfoPanel),compressor=(0,_compression2["default"])({flush:_zlib2["default"].Z_PARTIAL_FLUSH}),Server=function(){function e(s){_classCallCheck(this,e),this._app=(0,_express2["default"])(),this._port=s,this._serverUp=!1,this._appServerUp=!1,this._messages=[],this._sockets=[],this._appServer=_http2["default"].createServer(this._app);var t={maxAge:0};this._app.use("/js",_express2["default"]["static"]("../public/js",t)),this._app.use("/css",_express2["default"]["static"]("../public/css",t)),this._app.use("/imgs",_express2["default"]["static"]("../public/imgs",t)),this._app.use("/avatars",_express2["default"]["static"]("../public/avatars",t)),this._app.use("/fonts",_express2["default"]["static"]("../public/fonts")),this._app.use("/gtfs",_express2["default"]["static"]("../public/gtfs",t)),this._app.use("/serviceWorker.js",_express2["default"]["static"]("../public/serviceWorker.js",t)),this._app.use("/serviceWorker.js.map",_express2["default"]["static"]("../public/serviceWorker.js.map",t)),this._app.get("/",function(e,s){s.send((0,_templatesIndex2["default"])({extraCss:'<link rel="stylesheet" href="/css/lib.css"/>',scripts:['<script src="/js/main.js" defer></script>','<script src="/js/lib.js"></script>'],content:(0,_templatesInfoPanel2["default"])()}))})}return _createClass(e,[{key:"_listen",value:function(){var e=this;this._appServerUp||(this._appServer.listen(process.env.PORT||this._port,function(s){console.log("Server Listening on localhost:"+e._port)}),this._appServerUp=!0)}}]),e}();exports["default"]=Server,module.exports=exports["default"];
//# sourceMappingURL=Server.js.map
