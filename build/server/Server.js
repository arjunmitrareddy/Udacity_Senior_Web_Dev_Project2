"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),_express=require("express"),_express2=_interopRequireDefault(_express),_zlib=require("zlib"),_zlib2=_interopRequireDefault(_zlib),_compression=require("compression"),_compression2=_interopRequireDefault(_compression),_http=require("http"),_http2=_interopRequireDefault(_http),_net=require("net"),_net2=_interopRequireDefault(_net),_ws=require("ws"),_templatesIndex=require("./templates/index"),_templatesIndex2=_interopRequireDefault(_templatesIndex),_templatesInfoPanel=require("./templates/infoPanel"),_templatesInfoPanel2=_interopRequireDefault(_templatesInfoPanel),compressor=(0,_compression2["default"])({flush:_zlib2["default"].Z_PARTIAL_FLUSH}),Server=function(){function e(t){_classCallCheck(this,e),this._app=(0,_express2["default"])(),this._port=t,this._serverUp=!1,this._appServerUp=!1,this._messages=[],this._sockets=[],this._appServer=_http2["default"].createServer(this._app);var s={maxAge:0};this._app.use("/js",_express2["default"]["static"]("../public/js",s)),this._app.use("/css",_express2["default"]["static"]("../public/css",s)),this._app.use("/imgs",_express2["default"]["static"]("../public/imgs",s)),this._app.use("/avatars",_express2["default"]["static"]("../public/avatars",s)),this._app.use("/serviceWorker.js",_express2["default"]["static"]("../public/serviceWorker.js",s)),this._app.use("/serviceWorker.js.map",_express2["default"]["static"]("../public/serviceWorker.js.map",s)),this._app.use("/fonts",_express2["default"]["static"]("../public/fonts")),this._app.use("/gtfs",_express2["default"]["static"]("../public/gtfs",s)),this._app.get("/",function(e,t){t.send((0,_templatesIndex2["default"])({extraCss:'<link rel="stylesheet" href="/css/lib.css"/>',scripts:['<script src="/js/main.js" defer></script>','<script src="/js/lib.js"></script>'],content:(0,_templatesInfoPanel2["default"])()}))})}return _createClass(e,[{key:"_listen",value:function(){var e=this;this._appServerUp||(this._appServer.listen(this._port,function(t){console.log("Server Listening on localhost:"+e._port)}),this._appServerUp=!0)}}]),e}();exports["default"]=Server,module.exports=exports["default"];
//# sourceMappingURL=Server.js.map
